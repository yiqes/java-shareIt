# ShareIt

**ShareIt** — это приложение для обмена вещами между пользователями. Оно позволяет пользователям создавать запросы на аренду вещей, бронировать их, оставлять отзывы и управлять своими вещами.

---

## Основные функции

- **Управление пользователями**: создание, обновление, удаление и получение информации о пользователях.
- **Управление вещами**: добавление, обновление, удаление и поиск вещей.
- **Бронирование вещей**: создание, подтверждение и отмена бронирования.
- **Запросы на аренду**: создание и просмотр запросов на аренду вещей.
- **Отзывы**: возможность оставлять отзывы на арендованные вещи.

---

## Технологии

- **Java 21**
- **Spring Boot**
- **RestTemplate** для взаимодействия с основным сервисом
- **Maven** для сборки проекта
- **Логирование** с использованием Slf4j

---

## API

### 1. **Пользователи (`/users`)**
- **Создание пользователя**:  
  `POST /users`  
  Пример тела запроса:
  ```json
  {
    "name": "John Doe",
    "email": "john.doe@example.com"
  }
  ```

- **Получение пользователя по ID**:  
  `GET /users/{user-id}`

- **Получение всех пользователей**:  
  `GET /users`

- **Обновление пользователя**:  
  `PATCH /users/{user-id}`  
  Пример тела запроса:
  ```json
  {
    "name": "Jane Doe"
  }
  ```

- **Удаление пользователя**:  
  `DELETE /users/{user-id}`

---

### 2. **Вещи (`/items`)**
- **Создание вещи**:  
  `POST /items`  
  Пример тела запроса:
  ```json
  {
    "name": "Дрель",
    "description": "Мощная дрель для ремонта",
    "available": true
  }
  ```

- **Получение вещи по ID**:  
  `GET /items/{item-id}`

- **Получение всех вещей пользователя**:  
  `GET /items`

- **Обновление вещи**:  
  `PATCH /items/{item-id}`  
  Пример тела запроса:
  ```json
  {
    "description": "Мощная дрель с аккумулятором"
  }
  ```

- **Удаление вещи**:  
  `DELETE /items/{item-id}`

- **Поиск вещей**:  
  `GET /items/search?text={query}`

- **Добавление отзыва**:  
  `POST /items/{item-id}/comment`  
  Пример тела запроса:
  ```json
  {
    "text": "Отличная дрель, все работает!"
  }
  ```

---

### 3. **Бронирование (`/bookings`)**
- **Создание бронирования**:  
  `POST /bookings`  
  Пример тела запроса:
  ```json
  {
    "itemId": 1,
    "start": "2023-10-10T10:00:00",
    "end": "2023-10-15T10:00:00"
  }
  ```

- **Подтверждение бронирования**:  
  `PATCH /bookings/{booking-id}?approved=true`

- **Получение бронирования по ID**:  
  `GET /bookings/{booking-id}`

- **Получение всех бронирований пользователя**:  
  `GET /bookings?state={state}`

- **Получение бронирований владельца**:  
  `GET /bookings/owner?state={state}`

---

### 4. **Запросы на аренду (`/requests`)**
- **Создание запроса**:  
  `POST /requests`  
  Пример тела запроса:
  ```json
  {
    "description": "Нужна дрель для ремонта"
  }
  ```

- **Получение запроса по ID**:  
  `GET /requests/{request-id}`

- **Получение всех запросов**:  
  `GET /requests/all`

- **Получение собственных запросов**:  
  `GET /requests`

---

## Запуск приложения

1. Убедитесь, что у вас установлены:
    - Java 21
    - Maven

2. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/yiqes/java-shareit
   cd java-shareit
   ```

3. Соберите проект:
   ```bash
   mvn clean install
   ```

4. Запустите приложение:
   ```bash
   mvn spring-boot:run
   ```

5. Приложение будет доступно по адресу:  
   `http://localhost:8080`

---

## Примеры использования

### Создание пользователя
```bash
curl -X POST -H "Content-Type: application/json" -d '{"name": "John Doe", "email": "john.doe@example.com"}' http://localhost:8080/users
```

### Создание вещи
```bash
curl -X POST -H "Content-Type: application/json" -H "X-Sharer-User-Id: 1" -d '{"name": "Дрель", "description": "Мощная дрель", "available": true}' http://localhost:8080/items
```

### Создание бронирования
```bash
curl -X POST -H "Content-Type: application/json" -H "X-Sharer-User-Id: 2" -d '{"itemId": 1, "start": "2023-10-10T10:00:00", "end": "2023-10-15T10:00:00"}' http://localhost:8080/bookings
```

---

## Логирование

Логирование настроено с использованием Slf4j. Логи можно найти в консоли или в файле `logs/app.log`.

---